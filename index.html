<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>20-Fragen Farbtest</title>
  <style>
    :root { --bg:#f9fafb; --card:#ffffff; --text:#111827; --muted:#6b7280; --primary:#2563eb; --border:#e5e7eb; }
    * { box-sizing: border-box; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background: var(--bg); color: var(--text); margin: 0; }
    .container { max-width: 900px; margin: 0 auto; padding: 24px; }
    .card { background: var(--card); border:1px solid var(--border); border-radius:16px; padding:20px; box-shadow:0 1px 2px rgba(0,0,0,.04); margin-bottom:16px; }
    .row { display:grid; grid-template-columns:1fr 1fr; gap:12px; }
    @media (max-width:720px){ .row{ grid-template-columns:1fr; } }
    label { font-size:14px; color:#374151; display:block; margin-bottom:6px; }
    input[type="text"], input[type="number"], input[type="email"], select { width:100%; padding:10px 12px; border-radius:10px; border:1px solid var(--border); background:#fff; }
    .radio-group { display:flex; gap:12px; flex-wrap:wrap; }
    .radio { display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border:1px solid var(--border); border-radius:999px; background:#fff; cursor:pointer; }
    .buttons { display:flex; gap:10px; margin-top:12px; flex-wrap:wrap; }
    .btn { padding:10px 16px; border:none; border-radius:10px; cursor:pointer; font-size:16px; background:var(--border); }
    .btn.primary { background:var(--primary); color:#fff; }
    .btn.ghost { background:transparent; border:1px solid var(--border); }
    .question { margin-bottom:16px; padding:14px; border:1px solid var(--border); border-radius:12px; background:#fff; }
    .options label { display:block; margin:6px 0; cursor:pointer; }
    #result { display:none; }
    .bar { height:18px; border-radius:6px; margin:6px 0; }
    .bar-label { display:flex; justify-content:space-between; font-size:14px; }
    .pill { display:inline-block; background:#f3f4f6; border:1px solid var(--border); border-radius:999px; padding:4px 10px; font-size:12px; color:#374151; }
    .footer-note { font-size:12px; color:#6b7280; }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>Interaktiver 20-Fragen Farbtest</h1>
      <p>Beantworte jede Frage spontan. Mehrfachauswahl ist erlaubt.<br/>
      a = <b style="color:green">Grün</b>, b = <b style="color:red">Rot</b>, c = <b style="color:blue">Blau</b>, d = <b style="color:gold">Gelb</b>.</p>

      <div class="pill">Schritt 1 von 3: Angaben</div>
      <div id="form-step" class="card" style="margin-top:12px;">
        <div class="row">
          <div>
            <label for="name">Name *</label>
            <input id="name" type="text" placeholder="Max Mustermann" />
          </div>
          <div>
            <label for="age">Alter</label>
            <input id="age" type="number" min="0" max="120" placeholder="32" />
          </div>
        </div>
        <div class="row">
          <div>
            <label>Geschlecht</label>
            <div class="radio-group" role="radiogroup" aria-label="Geschlecht">
              <label class="radio"><input type="radio" name="gender" value="männlich"> männlich</label>
              <label class="radio"><input type="radio" name="gender" value="weiblich"> weiblich</label>
              <label class="radio"><input type="radio" name="gender" value="nonbinär"> nonbinär</label>
            </div>
          </div>
          <div>
            <label for="email">E-Mail *</label>
            <input id="email" type="email" placeholder="max@example.com" />
          </div>
        </div>
        <p class="footer-note">Hinweis: Eine Kopie des Resultats wird automatisch auch an <b>Andrei Mayer</b> (zu Testzwecken) an <b>andreimayer53@gmail.com</b> gesendet.</p>
        <div class="buttons">
          <button class="btn primary" id="startBtn">Zu den Fragen</button>
        </div>
      </div>

      <div id="quiz-step" class="card" style="display:none; margin-top:12px;">
        <div class="pill">Schritt 2 von 3: Fragen</div>
        <div id="questions" style="margin-top:12px;"></div>
        <div class="buttons">
          <button class="btn ghost" id="backBtn">Zurück</button>
          <button class="btn primary" id="calcBtn">Ergebnis berechnen</button>
          <button class="btn" id="resetBtn">Zurücksetzen</button>
        </div>
      </div>

      <div id="result-step" class="card" style="display:none; margin-top:12px;">
        <div class="pill">Schritt 3 von 3: Ergebnis</div>
        <div id="result" style="margin-top:12px;"></div>
        <div class="buttons">
          <button class="btn ghost" id="againBtn">Nochmals ausfüllen</button>
        </div>
      </div>
    </div>
  </div>

<script>
const QUESTIONS = [
  "Wenn jemand deine Idee öffentlich kritisiert, wie reagierst du?",
  "Wenn du ein neues Projekt startest, was treibt dich am meisten an?",
  "Jemand hält sich nicht an Abmachungen – wie reagierst du?",
  "In einer Gruppe fühlst du dich am wohlsten, wenn …",
  "Wie gehst du mit Risiken um?",
  "Neue Leute kennenlernen: wichtig ist mir …",
  "Schwieriges Problem lösen: ich …",
  "Konflikte: ich …",
  "Neues Ziel motiviert mich, weil …",
  "Misstrauen gegen mich → ich …",
  "Neue unklare Aufgabe → ich …",
  "Andere erleben mich meist als …",
  "Fehler → ich …",
  "Großes Lebensziel → wichtig ist …",
  "Plötzliche Veränderung → ich …",
  "Gruppe kann nicht entscheiden → ich …",
  "Emotionaler Ausbruch anderer → ich …",
  "Neues Projekt präsentieren → mir ist wichtig …",
  "Stress → ich …",
  "Worauf bist du am meisten stolz?"
];
const COLORS = { a: "Grün", b: "Rot", c: "Blau", d: "Gelb" };
const HEX = { "Grün":"#22c55e", "Rot":"#ef4444", "Blau":"#3b82f6", "Gelb":"#eab308" };

const formStep = document.getElementById("form-step");
const quizStep = document.getElementById("quiz-step");
const resultStep = document.getElementById("result-step");
const startBtn = document.getElementById("startBtn");
const backBtn = document.getElementById("backBtn");
const calcBtn = document.getElementById("calcBtn");
const resetBtn = document.getElementById("resetBtn");
const againBtn = document.getElementById("againBtn");
const questionsDiv = document.getElementById("questions");
const resultDiv = document.getElementById("result");

function renderQuestions(){
  questionsDiv.innerHTML = "";
  QUESTIONS.forEach((q,i)=>{
    const div = document.createElement("div");
    div.className = "question";
    div.innerHTML = `<b>${i+1}. ${q}</b>
      <div class="options">
        <label><input type="checkbox" name="q${i}" value="a"> a)</label>
        <label><input type="checkbox" name="q${i}" value="b"> b)</label>
        <label><input type="checkbox" name="q${i}" value="c"> c)</label>
        <label><input type="checkbox" name="q${i}" value="d"> d)</label>
      </div>`;
    questionsDiv.appendChild(div);
  });
}

startBtn.addEventListener("click", ()=>{
  // kein Blockieren mehr
  formStep.style.display = "none";
  quizStep.style.display = "block";
  renderQuestions();
  window.scrollTo({top:0,behavior:"smooth"});
});

backBtn?.addEventListener("click", ()=>{
  quizStep.style.display = "none";
  formStep.style.display = "block";
  window.scrollTo({top:0,behavior:"smooth"});
});

calcBtn?.addEventListener("click", ()=>{
  let tally = { "Grün":0, "Rot":0, "Blau":0, "Gelb":0 };
  QUESTIONS.forEach((q,i)=>{
    document.querySelectorAll(`input[name=q${i}]:checked`).forEach(inp=>{
      tally[COLORS[inp.value]] += 1;
    });
  });
  const total = Object.values(tally).reduce((a,b)=>a+b,0) || 1;
  let html = `<h2>Dein Farbprofil</h2>`;
  Object.entries(tally).forEach(([name,val])=>{
    const pct = (val/total*100).toFixed(1);
    html += `<div class="bar-label"><span>${name}</span><span>${pct}%</span></div>
             <div class="bar" style="background:${HEX[name]}; width:${pct}%"></div>`;
  });
  html += `<p class="footer-note"><i>Gesamt-Antworten gezählt: ${total}</i></p>`;
  resultDiv.innerHTML = html;
  quizStep.style.display="none";
  resultStep.style.display="block";
  resultDiv.style.display="block";
  window.scrollTo({top:0,behavior:"smooth"});
});

resetBtn?.addEventListener("click", ()=>{
  document.querySelectorAll("input[type=checkbox]").forEach(c=>c.checked=false);
  resultDiv.innerHTML="";
  resultDiv.style.display="none";
});

againBtn?.addEventListener("click", ()=>{
  document.querySelectorAll("input[type=checkbox]").forEach(c=>c.checked=false);
  resultDiv.innerHTML="";
  resultDiv.style.display="none";
  quizStep.style.display="none";
  formStep.style.display="block";
});
</script>
</body>
</html>
