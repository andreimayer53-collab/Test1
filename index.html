<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Business Farbtest â€“ 20 Fragen</title>
  <style>
    :root{
      --bg:#f9f9f7; --card:#ffffff; --ink:#111111;
      --muted:#6b7280; --gold:#d4af37; --border:#e5e7eb;
      --red:#ef4444; --green:#22c55e; --blue:#3b82f6; --yellow:#eab308;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--ink);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial}
    .container{max-width:900px;margin:0 auto;padding:24px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:20px;box-shadow:0 1px 2px rgba(0,0,0,.04);margin-bottom:16px}
    h1{margin:0 0 8px;text-align:center;font-weight:700}
    .subtitle{color:var(--muted);text-align:center;margin:0 0 20px}
    label{font-size:14px;color:#222}
    input[type=text],input[type=number]{width:100%;padding:12px;border:1px solid var(--border);border-radius:10px;background:#fff}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .row3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px}
    @media (max-width:720px){.row,.row3{grid-template-columns:1fr}}
    .radio-line{display:flex;gap:12px;flex-wrap:wrap}
    .radio-pill{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border:1px solid var(--border);border-radius:999px;background:#fff;cursor:pointer}
    .pill{display:inline-block;background:#f3f4f6;border:1px solid var(--border);border-radius:999px;padding:4px 10px;font-size:12px;color:#374151}
    .btns{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .btn{padding:10px 16px;border:none;border-radius:10px;cursor:pointer;font-size:16px;background:#111;color:#fff}
    .btn.secondary{background:#e5e7eb;color:#111}
    .btn:disabled{opacity:.5;cursor:not-allowed}
    .error{color:#991b1b;background:#fef2f2;border:1px solid #fecaca;padding:10px;border-radius:10px;margin-top:10px;display:none}
    .q-title{color:var(--gold);font-size:20px;font-weight:700;margin:2px 0 12px}
    .opt{display:flex;align-items:center;gap:10px;margin:8px 0;padding:10px;border:1px solid var(--border);border-radius:10px;background:#fff;cursor:pointer}
    .opt input{transform:scale(1.2)}
    .dot{width:12px;height:12px;border-radius:999px;display:inline-block}
    .dot.red{background:var(--red)} .dot.green{background:var(--green)} .dot.blue{background:var(--blue)} .dot.yellow{background:var(--yellow)}
    .progress{font-size:12px;color:var(--muted)}
    .bar-wrap{margin:6px 0;background:#f3f4f6;border-radius:6px;height:20px;position:relative;overflow:hidden;border:1px solid var(--border)}
    .bar{height:100%}
    .lbl{display:flex;justify-content:space-between}
    .legend span{margin-right:12px;display:inline-flex;align-items:center;gap:6px}
    .note{font-size:12px;color:#6b7280;margin-top:6px}
  </style>
</head>
<body>
<div class="container">
  <h1>Business Farbtest</h1>
  <p class="subtitle" id="subtitle">WÃ¤hle spontan. Mehrfachauswahl ist erlaubt â€“ die Reihenfolge zÃ¤hlt.</p>

  <div class="card" id="step-intake">
    <div class="pill" id="step1-label">Schritt 1 von 3: Anmeldung</div>
    <div class="row" style="margin-top:12px">
      <div><label id="label-last">Nachname *</label><input id="lastName" type="text" placeholder="Muster"/></div>
      <div><label id="label-first">Vorname *</label><input id="firstName" type="text" placeholder="Max"/></div>
    </div>
    <div class="row" style="margin-top:12px">
      <div><label id="label-age">Alter *</label><input id="age" type="number" min="10" max="120" placeholder="32"/></div>
      <div><label id="label-city">Wohnort *</label><input id="city" type="text" placeholder="ZÃ¼rich / Berlin / Wien"/></div>
    </div>
    <div class="row3" style="margin-top:12px">
      <div>
        <label id="label-gender">Geschlecht *</label>
        <div class="radio-line">
          <label class="radio-pill"><input type="radio" name="gender" value="mÃ¤nnlich" /> mÃ¤nnlich</label>
          <label class="radio-pill"><input type="radio" name="gender" value="weiblich" /> weiblich</label>
          <label class="radio-pill"><input type="radio" name="gender" value="nonbinÃ¤r" /> nonbinÃ¤r</label>
        </div>
      </div>
      <div>
        <label id="label-lang">Sprache</label>
        <div class="radio-line">
          <label class="radio-pill"><input type="radio" name="lang" value="de" checked /> Deutsch</label>
          <label class="radio-pill"><input type="radio" name="lang" value="en" /> English</label>
        </div>
        <div class="note" id="hint-multi">Mehrfachauswahl ist erlaubt. Die Reihenfolge der Klicks bestimmt die Gewichtung (4â€‘3â€‘2â€‘1).</div>
      </div>
    </div>
    <div id="intake-error" class="error"></div>
    <div class="btns"><button class="btn" id="btn-start">Start</button></div>
  </div>

  <div class="card" id="step-quiz" style="display:none">
    <div class="pill" id="step2-label">Schritt 2 von 3: Fragen</div>
    <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
      <div class="progress" id="progress">Frage 1/20</div>
      <div class="legend">
        <span><span class="dot red"></span>Rot</span>
        <span><span class="dot green"></span>GrÃ¼n</span>
        <span><span class="dot blue"></span>Blau</span>
        <span><span class="dot yellow"></span>Gelb</span>
      </div>
    </div>
    <div style="margin-top:10px">
      <div class="q-title" id="q-title">Fragetextâ€¦</div>
      <div id="opts"></div>
    </div>
    <div id="q-error" class="error"></div>
    <div class="btns">
      <button class="btn secondary" id="btn-back">ZurÃ¼ck</button>
      <button class="btn" id="btn-next" disabled>Weiter</button>
    </div>
  </div>

  <div class="card" id="step-result" style="display:none">
    <div class="pill" id="step3-label">Schritt 3 von 3: Ergebnis</div>
    <h2 id="res-title">Dein Farbprofil</h2>
    <div id="bars"></div>
    <div id="desc" style="margin-top:12px"></div>
    <p class="note">Hinweis: Es wird keine Eâ€‘Mail verschickt. Du kannst das Zertifikatâ€‘PDF direkt herunterladen.</p>
    <div class="btns">
      <button class="btn secondary" id="btn-again">Nochmals starten</button>
      <button class="btn" id="btn-download">PDF speichern</button>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
<script>
const I18N = {de:{ui:{subtitle:"WÃ¤hle spontan. Mehrfachauswahl ist erlaubt â€“ die Reihenfolge zÃ¤hlt.",step1:"Schritt 1 von 3: Anmeldung",step2:"Schritt 2 von 3: Fragen",step3:"Schritt 3 von 3: Ergebnis",last:"Nachname *",first:"Vorname *",age:"Alter *",city:"Wohnort *",gender:"Geschlecht *",start:"Start",back:"ZurÃ¼ck",next:"Weiter",again:"Nochmals starten",download:"PDF speichern",progress:(i,n)=>`Frage ${i}/${n}`,errors:{intake:"Bitte Nachname, Vorname, Alter, Wohnort und Geschlecht ausfÃ¼llen.",question:"Bitte wÃ¤hle mindestens eine Antwort."},resTitle:"Dein Farbprofil",colors:{red:"Rot",green:"GrÃ¼n",blue:"Blau",yellow:"Gelb"},colorDesc:{red:"Rot (dominant): durchsetzungsstark, zielorientiert, entscheidungsfreudig.",green:"GrÃ¼n (stetig): kooperativ, geduldig, beziehungsorientiert.",blue:"Blau (gewissenhaft): analytisch, prÃ¤zise, qualitÃ¤tsorientiert.",yellow:"Gelb (initiativ): kreativ, kommunikativ, begeisterungsfÃ¤hig."},pdf:{title:"ZERTIFIKAT â€“ Business Farbtest",participant:"Teilnehmer",details:"Details",date:"Datum",percentages:"Anteile",summary:"Charakterprofil"}},q:[]},en:{ui:{subtitle:"Answer spontaneously. Multiple choices allowed â€” order matters.",step1:"Step 1 of 3: Registration",step2:"Step 2 of 3: Questions",step3:"Step 3 of 3: Result",last:"Last name *",first:"First name *",age:"Age *",city:"City *",gender:"Gender *",start:"Start",back:"Back",next:"Next",again:"Start again",download:"Save PDF",progress:(i,n)=>`Question ${i}/${n}`,errors:{intake:"Please fill last name, first name, age, city and gender.",question:"Please choose at least one option."},resTitle:"Your color profile",colors:{red:"Red",green:"Green",blue:"Blue",yellow:"Yellow"},colorDesc:{red:"Red (dominant): assertive, goal-oriented, decisive.",green:"Green (steadiness): cooperative, patient, relationship-oriented.",blue:"Blue (conscientious): analytical, precise, quality-driven.",yellow:"Yellow (influencing): creative, communicative, enthusiastic."},pdf:{title:"CERTIFICATE â€“ Business Color Test",participant:"Participant",details:"Details",date:"Date",percentages:"Percentages",summary:"Profile Summary"}},q:[]}};
I18N.de.q=[{q:"Wenn jemand deine Idee in einem Meeting Ã¶ffentlich kritisiert, wie reagierst du?",opts:[{color:"red",text:"Ich verteidige meine Idee sofort und argumentiere stark."},{color:"green",text:"Ich hÃ¶re mir die Kritik ruhig an und versuche VerstÃ¤ndnis zu zeigen."},{color:"blue",text:"Ich prÃ¼fe sachlich, ob die Kritik fundiert ist."},{color:"yellow",text:"Ich reagiere locker und nehme es mit Humor."}]},{q:"Wenn du ein neues Projekt startest, was treibt dich am meisten an?",opts:[{color:"red",text:"Ein messbares Ergebnis und schneller Erfolg."},{color:"green",text:"Gemeinsam im Team etwas Sinnvolles schaffen."},{color:"blue",text:"Einen klaren Plan entwickeln und Fehler vermeiden."},{color:"yellow",text:"Etwas Neues ausprobieren und Begeisterung wecken."}]},{q:"Ein Mitarbeiter hÃ¤lt sich nicht an Abmachungen â€“ wie reagierst du?",opts:[{color:"red",text:"Ich spreche es sofort klar und direkt an."},{color:"green",text:"Ich erinnere freundlich daran und suche das GesprÃ¤ch."},{color:"blue",text:"Ich frage nach den GrÃ¼nden und dokumentiere es."},{color:"yellow",text:"Ich improvisiere und mache pragmatisch weiter."}]},{q:"In einem Projektteam fÃ¼hlst du dich am wohlsten, wenn â€¦",opts:[{color:"red",text:"klare FÃ¼hrung und schnelle Entscheidungen da sind."},{color:"green",text:"Harmonie herrscht und alle an einem Strang ziehen."},{color:"blue",text:"Strukturen und Regeln eingehalten werden."},{color:"yellow",text:"KreativitÃ¤t, Abwechslung und Energie spÃ¼rbar sind."}]},{q:"Wie gehst du bei einer wichtigen geschÃ¤ftlichen Entscheidung mit Risiken um?",opts:[{color:"red",text:"Ich gehe mutig ins Risiko, wenn die Chance groÃŸ ist."},{color:"green",text:"Ich Ã¼berlege, wie es andere betrifft, bevor ich handle."},{color:"blue",text:"Ich analysiere Risiken grÃ¼ndlich, bevor ich entscheide."},{color:"yellow",text:"Ich probiere es spontan aus und schaue, was passiert."}]},{q:"Wenn du neue GeschÃ¤ftskontakte knÃ¼pfst, was ist dir am wichtigsten?",opts:[{color:"red",text:"Kompetenz und Wirkung zu zeigen."},{color:"green",text:"Vertrauen und Sympathie aufzubauen."},{color:"blue",text:"VerlÃ¤sslichkeit und Fakten zu erfahren."},{color:"yellow",text:"Begeisterung und positive Stimmung zu schaffen."}]},{q:"Bei einem komplexen Problem im Job: wie gehst du es an?",opts:[{color:"red",text:"Ich handle schnell und finde eine pragmatische LÃ¶sung."},{color:"green",text:"Ich beziehe andere ein und suche Konsens."},{color:"blue",text:"Ich zerlege es in Schritte und analysiere systematisch."},{color:"yellow",text:"Ich finde kreative, unkonventionelle Ideen."}]},{q:"In Konflikten am Arbeitsplatz oder im Projektteam: wie verhÃ¤ltst du dich?",opts:[{color:"red",text:"Ich gehe in die Konfrontation und setze mich durch."},{color:"green",text:"Ich suche Ausgleich und Frieden."},{color:"blue",text:"Ich bleibe sachlich und argumentiere nÃ¼chtern."},{color:"yellow",text:"Ich versuche es mit Humor zu entschÃ¤rfen."}]},{q:"Ein neues Unternehmensziel wird gesetzt â€“ warum motiviert dich das?",opts:[{color:"red",text:"Ich will beweisen, dass ich es schaffen kann."},{color:"green",text:"Ich mÃ¶chte, dass unser Team erfolgreich ist."},{color:"blue",text:"Ich freue mich, meine Kompetenzen strukturiert einzusetzen."},{color:"yellow",text:"Ich finde es spannend, Neues auszuprobieren."}]},{q:"Ein Kunde oder Kollege zweifelt an deiner Kompetenz â€“ wie reagierst du?",opts:[{color:"red",text:"Ich stelle klar, dass ich zuverlÃ¤ssig und stark bin."},{color:"green",text:"Ich baue mit Geduld und Vertrauen die Beziehung auf."},{color:"blue",text:"Ich lege Beweise und Argumente vor."},{color:"yellow",text:"Ich Ã¼berzeuge mit Offenheit und Charme."}]},{q:"Du erhÃ¤ltst eine neue, unklare Aufgabe von deinem Vorgesetzten â€“ was machst du zuerst?",opts:[{color:"red",text:"Ich lege einfach los und entscheide unterwegs."},{color:"green",text:"Ich frage Kollegen um Rat und UnterstÃ¼tzung."},{color:"blue",text:"Ich sortiere die Fakten und mache einen Plan."},{color:"yellow",text:"Ich probiere verschiedene AnsÃ¤tze spontan aus."}]},{q:"Wie beschreiben dich deine Kollegen im Arbeitsalltag am hÃ¤ufigsten?",opts:[{color:"red",text:"Zielstrebig und entschlossen."},{color:"green",text:"Freundlich und hilfsbereit."},{color:"blue",text:"Sachlich und genau."},{color:"yellow",text:"Lebendig und kommunikativ."}]},{q:"Wenn dir bei einem Projekt ein Fehler passiert â€“ wie gehst du damit um?",opts:[{color:"red",text:"Ich stehe dazu und mache sofort weiter."},{color:"green",text:"Ich entschuldige mich und mache es wieder gut."},{color:"blue",text:"Ich analysiere grÃ¼ndlich die Ursachen."},{color:"yellow",text:"Ich nehme es locker und gehe kreativ damit um."}]},{q:"In Bezug auf deine Karriere: was ist dein wichtigstes Lebensziel?",opts:[{color:"red",text:"Erfolg und Anerkennung."},{color:"green",text:"Harmonie und stabile Beziehungen."},{color:"blue",text:"Sicherheit und PrÃ¤zision."},{color:"yellow",text:"SpaÃŸ, Freiheit und Abenteuer."}]},{q:"Dein Unternehmen Ã¤ndert plÃ¶tzlich eine wichtige Strategie â€“ wie reagierst du?",opts:[{color:"red",text:"Ich stelle mich sofort der neuen Situation."},{color:"green",text:"Ich suche Halt und StabilitÃ¤t."},{color:"blue",text:"Ich analysiere, welche Anpassungen nÃ¶tig sind."},{color:"yellow",text:"Ich freue mich auf Neues und gehe locker damit um."}]},{q:"Dein Team kann sich in einem Meeting nicht auf eine LÃ¶sung einigen â€“ was tust du?",opts:[{color:"red",text:"Ich Ã¼bernehme die Entscheidung."},{color:"green",text:"Ich suche eine LÃ¶sung, die fÃ¼r alle passt."},{color:"blue",text:"Ich analysiere die Fakten und schlage eine sachliche LÃ¶sung vor."},{color:"yellow",text:"Ich bringe spontan eine Idee ein."}]},{q:"Ein Kollege oder Kunde reagiert sehr emotional â€“ wie verhÃ¤ltst du dich?",opts:[{color:"red",text:"Ich setze klare Grenzen."},{color:"green",text:"Ich hÃ¶re zu und zeige VerstÃ¤ndnis."},{color:"blue",text:"Ich bleibe sachlich und distanziert."},{color:"yellow",text:"Ich versuche, die Stimmung aufzuhellen."}]},{q:"Du prÃ¤sentierst ein neues Projekt vor GeschÃ¤ftsleitung oder Kunden â€“ was ist dir dabei am wichtigsten?",opts:[{color:"red",text:"StÃ¤rke und Durchsetzung zu zeigen."},{color:"green",text:"Alle einzubeziehen und NÃ¤he zu schaffen."},{color:"blue",text:"Fachlich korrekt und logisch zu erklÃ¤ren."},{color:"yellow",text:"Es lebendig, kreativ und spannend zu machen."}]},{q:"Wenn der Arbeitsdruck hoch und die Deadline nah ist â€“ wie gehst du mit dem Stress um?",opts:[{color:"red",text:"Ich gebe Vollgas und ziehe durch."},{color:"green",text:"Ich suche Ruhe, GesprÃ¤che und Ausgleich."},{color:"blue",text:"Ich organisiere mich noch genauer."},{color:"yellow",text:"Ich motiviere mich mit Humor und Ablenkung."}]},{q:"Worauf bist du in deinem Berufsleben am meisten stolz?",opts:[{color:"red",text:"Auf meine Erfolge und DurchsetzungsstÃ¤rke."},{color:"green",text:"Auf meine Hilfsbereitschaft und LoyalitÃ¤t."},{color:"blue",text:"Auf meine Genauigkeit und VerlÃ¤sslichkeit."},{color:"yellow",text:"Auf meine KreativitÃ¤t und Lebensfreude."}]}];
I18N.en.q = JSON.parse(JSON.stringify(I18N.de.q));

let lang="de"; let qIndex=0; const selections=[];
const $=id=>document.getElementById(id);
function setLang(newLang){ lang=newLang; const t=I18N[lang].ui;
$("subtitle").textContent=t.subtitle; $("step1-label").textContent=t.step1; $("step2-label").textContent=t.step2; $("step3-label").textContent=t.step3;
$("label-last").textContent=t.last; $("label-first").textContent=t.first; $("label-age").textContent=t.age; $("label-city").textContent=t.city; $("label-gender").textContent=t.gender; $("label-lang").textContent=lang==="de"?"Sprache":"Language";
$("btn-start").textContent=t.start; $("btn-back").textContent=t.back; $("btn-next").textContent=t.next; $("btn-again").textContent=t.again; $("btn-download").textContent=t.download; $("res-title").textContent=t.resTitle; }
function goToQuestions(){ document.querySelectorAll("input[name='lang']").forEach(r=>{if(r.checked) setLang(r.value)}); qIndex=0; selections.length=0; renderCurrentQuestion(); $("step-intake").style.display="none"; $("step-quiz").style.display="block"; $("btn-next").disabled=true; window.scrollTo({top:0,behavior:"smooth"}); }
$("btn-start").addEventListener("click", ()=>{ const t=I18N[lang].ui; const missing=[]; const last=$("lastName").value.trim(); const first=$("firstName").value.trim(); const age=$("age").value.trim(); const city=$("city").value.trim(); const gSel=document.querySelector("input[name='gender']:checked");
if(!last)missing.push(t.last.replace(" *","")); if(!first)missing.push(t.first.replace(" *","")); if(!age||isNaN(+age))missing.push(t.age.replace(" *","")); if(!city)missing.push(t.city.replace(" *","")); if(!gSel)missing.push(t.gender.replace(" *",""));
if(missing.length){ $("intake-error").innerHTML=(lang==="de"?"Bitte ausfÃ¼llen: ":"Please fill: ")+"<b>"+missing.join(", ")+"</b>."; $("intake-error").style.display="block"; } else { $("intake-error").style.display="none"; goToQuestions(); }});
function renderCurrentQuestion(){ const pack=I18N[lang]; const total=pack.q.length; const q=pack.q[qIndex]; $("progress").textContent=pack.ui.progress(qIndex+1,total); $("q-title").textContent=q.q; $("q-error").style.display="none"; const container=$("opts"); container.innerHTML=""; const colorDot={red:"red",green:"green",blue:"blue",yellow:"yellow"}; const localOrder=selections[qIndex]?selections[qIndex].slice():[];
q.opts.forEach((opt,idx)=>{ const row=document.createElement("label"); row.className="opt"; const checked=localOrder.includes(idx)?"checked":""; row.innerHTML=`<input type="checkbox" data-idx="${idx}" ${checked}/><span class="dot ${colorDot[opt.color]}"></span><span>${opt.text}</span>`; row.querySelector("input").addEventListener("change",(e)=>{ if(e.target.checked){ if(!localOrder.includes(idx)) localOrder.push(idx);} else { const p=localOrder.indexOf(idx); if(p>-1) localOrder.splice(p,1);} $("btn-next").disabled=localOrder.length===0; }); container.appendChild(row); });
$("btn-next").onclick=()=>{ if(localOrder.length===0){ $("q-error").textContent=pack.ui.errors.question; $("q-error").style.display="block"; return;} selections[qIndex]=localOrder.slice(); if(qIndex<total-1){ qIndex++; renderCurrentQuestion(); $("btn-next").disabled=selections[qIndex]?.length>0?false:true; window.scrollTo({top:0,behavior:"smooth"});} else { computeAndShowResults(); } };
$("btn-back").onclick=()=>{ if(qIndex===0){ $("step-quiz").style.display="none"; $("step-intake").style.display="block"; } else { qIndex--; renderCurrentQuestion(); $("btn-next").disabled=selections[qIndex]?.length>0?false:true; } };
$("btn-next").disabled=localOrder.length===0; }
function computeAndShowResults(){ const pack=I18N[lang]; const weights=[4,3,2,1]; const tally={red:0,green:0,blue:0,yellow:0}; pack.q.forEach((q,qi)=>{ const order=selections[qi]||[]; order.forEach((optIndex,pos)=>{ const color=q.opts[optIndex].color; const w=weights[pos]||1; tally[color]+=w; }); }); const totalPoints=Object.values(tally).reduce((a,b)=>a+b,0)||1; const pct=Object.fromEntries(Object.entries(tally).map(([k,v])=>[k,+(v/totalPoints*100).toFixed(1)]));
$("step-quiz").style.display="none"; $("step-result").style.display="block"; $("res-title").textContent=pack.ui.resTitle; $("bars").innerHTML=renderBars(pct,pack.ui.colors); $("desc").innerHTML=renderDescriptions(pct,pack.ui); generatePDF(pct); }
function renderBars(pct,names){ const colorHex={red:"var(--red)",green:"var(--green)",blue:"var(--blue)",yellow:"var(--yellow)"}; const order=["red","green","blue","yellow"]; return order.map(c=>`<div class="lbl"><span>${names[c]}</span><span>${pct[c]}%</span></div><div class="bar-wrap"><div class="bar" style="background:${colorHex[c]}; width:${pct[c]}%"></div></div>`).join(""); }
function renderDescriptions(pct,ui){ const lines=[]; const entries=Object.entries(pct).sort((a,b)=>b[1]-a[1]); entries.forEach(([c,val])=>{ const dot=c==="red"?"ðŸ”´":c==="green"?"ðŸŸ¢":c==="blue"?"ðŸ”µ":"ðŸŸ¡"; lines.push(`<p><b>${dot} ${ui.colors[c]} (${val}%):</b> ${ui.colorDesc[c]}</p>`); }); return lines.join(""); }
function generatePDF(pct){ const pack=I18N[lang]; const ui=pack.ui; const { jsPDF }=window.jspdf; const doc=new jsPDF({unit:"pt",format:"a4"}); const last=$("lastName").value.trim(); const first=$("firstName").value.trim(); const age=$("age").value.trim(); const city=$("city").value.trim(); const gender=document.querySelector("input[name='gender']:checked")?.value||""; const today=new Date().toLocaleDateString(lang==="de"?"de-CH":"en-GB"); const ageLabel=lang==="de"?"Alter":"Age"; const cityLabel=lang==="de"?"Wohnort":"City"; const genderLabel=lang==="de"?"Geschlecht":"Gender";
doc.setFont("helvetica","bold"); doc.setFontSize(18); doc.text(ui.pdf.title,40,60); doc.setFont("helvetica","normal"); doc.setFontSize(12); doc.text(`${ui.pdf.participant}: ${first} ${last}`,40,85); doc.text(`${ui.pdf.details}: ${genderLabel} ${gender}, ${ageLabel} ${age}, ${cityLabel} ${city}`,40,103); doc.text(`${ui.pdf.date}: ${today}`,40,121);
const barsY=160; const barW=400, barH=16, gap=30; const colors={red:"#ef4444",green:"#22c55e",blue:"#3b82f6",yellow:"#eab308"}; const names=ui.colors; let y=barsY; ["red","green","blue","yellow"].forEach((c)=>{ doc.setFont("helvetica","bold"); doc.setFontSize(12); doc.text(`${names[c]} ${pct[c]}%`,40,y+12); doc.setDrawColor(230); doc.setFillColor(243,244,246); doc.rect(180,y,barW,barH,"F"); const fillW=Math.max(0,Math.min(barW,barW*pct[c]/100)); const hex=colors[c]; const r=parseInt(hex.substr(1,2),16), g=parseInt(hex.substr(3,2),16), b=parseInt(hex.substr(5,2),16); doc.setFillColor(r,g,b); doc.rect(180,y,fillW,barH,"F"); y+=gap; });
doc.setFont("helvetica","bold"); doc.setFontSize(14); doc.text(ui.pdf.summary||(lang==='de'?'Charakterprofil':'Profile Summary'),40,y+20); doc.setFont("helvetica","normal"); doc.setFontSize(12); let textY=y+40; const descHtml=renderDescriptions(pct,ui); const tmp=document.createElement("div"); tmp.innerHTML=descHtml; const plain=tmp.innerText; const wrapped=doc.splitTextToSize(plain,515); doc.text(wrapped,40,textY);
document.getElementById("btn-download").onclick=()=> doc.save(`Farbtest_${first}_${last}.pdf`); }
function initLangBinding(){ document.querySelectorAll("input[name='lang']").forEach(r=>{ r.addEventListener("change", ()=> setLang(r.value)); }); } setLang("de"); initLangBinding();
document.getElementById("btn-again").addEventListener("click", ()=>{ document.getElementById("step-result").style.display="none"; document.getElementById("step-intake").style.display="block"; window.scrollTo({top:0,behavior:"smooth"}); });
</script>
</body>
</html>